<!-- components/academy/dashboard/DashboardTodayTasks.vue -->
<template>
    <section
      class="h-full rounded-xl bg-white p-5 shadow-sm ring-1 ring-slate-200/70"
    >
      <header class="mb-4 flex items-center justify-between gap-3">
        <div>
          <h2 class="text-sm font-semibold text-slate-900">
            ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯
          </h2>
          <p class="mt-1 text-xs text-slate-500">
            1 æ—¥ã‚ãŸã‚Šã®ç›®å®‰å­¦ç¿’é‡ã«åŸºã¥ã„ã¦è‡ªå‹•ã§è¨­å®šã•ã‚Œã¾ã™ã€‚
          </p>
        </div>
        <span class="rounded-full bg-emerald-50 px-3 py-1 text-xs font-medium text-emerald-700">
          {{ completedCount }} / {{ tasks.length }} å®Œäº†
        </span>
      </header>
  
      <ul class="space-y-3">
        <li
          v-for="task in tasks"
          :key="task.id"
          class="flex items-start justify-between gap-3 rounded-lg border border-slate-100 px-3 py-2.5"
        >
          <div class="flex flex-1 items-start gap-3">
            <div
              class="mt-0.5 flex h-7 w-7 items-center justify-center rounded-full text-base"
              :class="task.iconBg"
            >
              <span>{{ task.icon }}</span>
            </div>
            <div class="flex-1">
              <p class="text-xs font-semibold text-slate-900">
                {{ task.title }}
              </p>
              <p class="mt-0.5 text-[11px] text-slate-500">
                {{ task.description }}
              </p>
  
              <div class="mt-2 flex items-center gap-2 text-[11px] text-slate-500">
                <div class="flex-1 overflow-hidden rounded-full bg-slate-100">
                  <div
                    class="h-1 rounded-full bg-emerald-500"
                    :style="{ width: `${task.progress}%` }"
                  ></div>
                </div>
                <span class="tabular-nums">
                  {{ task.progress }}%
                </span>
                <span class="text-slate-400">
                  / ç´„ {{ task.estimatedMinutes }} åˆ†
                </span>
              </div>
            </div>
          </div>
  
          <button
            type="button"
            class="ml-1 rounded-md border border-slate-200 px-2 py-1 text-[11px] font-medium text-slate-600 hover:bg-slate-50"
          >
            é–‹å§‹
          </button>
        </li>
      </ul>
    </section>
  </template>
  
  <script setup lang="ts">
  interface TodayTask {
    id: string
    title: string
    description: string
    icon: string
    iconBg: string
    progress: number
    estimatedMinutes: number
    completed: boolean
  }
  
  /**
   * ä»®ãƒ‡ãƒ¼ã‚¿ï¼š
   * å®Ÿè£…æ™‚ã¯ composables ã‚„ API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å·®ã—æ›¿ãˆ
   */
  const tasks: TodayTask[] = [
    {
      id: 'lesson',
      title: 'è¬›ç¾©ï¼šç¬¬1ç«  åŒ»è–¬å“ã«å…±é€šã™ã‚‹ç‰¹æ€§ã¨åŸºæœ¬çš„ãªçŸ¥è­˜',
      description: 'ãƒ†ã‚­ã‚¹ãƒˆ 1 ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ†ï¼ˆç´„ 10 ãƒšãƒ¼ã‚¸ï¼‰ã‚’èª­ã¿é€²ã‚ã¾ã™ã€‚',
      icon: 'ğŸ“•',
      iconBg: 'bg-emerald-50',
      progress: 40,
      estimatedMinutes: 25,
      completed: false,
    },
    {
      id: 'practice',
      title: 'æ¼”ç¿’ï¼šä¸€å•ä¸€ç­” 20 å•',
      description: 'ç¬¬1ç« ã‹ã‚‰é »å‡ºã®åŸºæœ¬å•é¡Œã‚’ä¸­å¿ƒã«ç¢ºèªã—ã¾ã™ã€‚',
      icon: 'âœï¸',
      iconBg: 'bg-sky-50',
      progress: 0,
      estimatedMinutes: 15,
      completed: false,
    },
    {
      id: 'flashcards',
      title: 'æš—è¨˜ã‚«ãƒ¼ãƒ‰ï¼šè¦å¾©ç¿’ã‚«ãƒ¼ãƒ‰ 15 æš',
      description: 'å‰å›ã€Œè¦å¾©ç¿’ã€ã¨ã—ãŸã‚«ãƒ¼ãƒ‰ã®ã¿ã‚’å„ªå…ˆçš„ã«å‡ºé¡Œã—ã¾ã™ã€‚',
      icon: 'ğŸ§ ',
      iconBg: 'bg-amber-50',
      progress: 0,
      estimatedMinutes: 10,
      completed: false,
    },
  ]
  
  const completedCount = tasks.filter((t) => t.completed).length
  </script>
  